import axios from 'axios';
import {API_TOKEN, API_URL, APP_ENV} from '@env';

const AuthStr = 'Bearer '.concat(API_TOKEN); 

const getHighlight = () => {  
  axios.get(`${API_URL}/highlights?populate=*`, { headers: { Authorization: AuthStr } }).then((response) => {

    let response = response.data[0]
    let highlight = []
    let highlightId = null
    let highlightType = null

    if(response.track.data){
        highlightId = response.track.data.id
        highlightType = 'tracks'
    }else if(response.universe.data){
        highlightId = response.universe.data.id
        highlightType = 'universes'
    }else{
        highlightId = response.place.data.id
        highlightType = 'places'
    }
    axios.get(`${API_URL}/${highlightType}/${highlightId}?populate=*`, { headers: { Authorization: AuthStr } }).then((response) => {
      highlight = [
        'type' = highlightType,
        'data' = response.data[0]
      ]
    });
    
    if(APP_ENV === 'DEV'){
      console.log(highlight);
    }
    return highlight
  });
};

export {
  getHighlight
}